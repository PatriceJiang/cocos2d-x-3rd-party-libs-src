diff --git a/Configurations/15-android.conf b/Configurations/15-android.conf
index d3b428b..bbc3e01 100644
--- a/Configurations/15-android.conf
+++ b/Configurations/15-android.conf
@@ -14,6 +14,11 @@
         mips64 => "mips64el-linux-android",
         x86    => "i686-linux-android",
         x86_64 => "x86_64-linux-android",
+        "android-armeabi"    => "arm-linux-androideabi",
+        "android-arm"    => "arm-linux-androideabi",
+        "android64-aarch64"  => "aarch64-linux-android",
+        "android-x86"    => "i686-linux-android",
+        "android-x86_64" => "x86_64-linux-android",
     );
 
     sub android_ndk {
@@ -23,12 +28,17 @@
             }
 
             my $ndk = $ENV{ANDROID_NDK};
+            print "#############NDK######################\n";
+            print "ndk: $ndk"."\n";
             die "\$ANDROID_NDK is not defined"  if (!$ndk);
             die "\$ANDROID_NDK=$ndk is invalid" if (!-d "$ndk/platforms");
             $ndk = canonpath($ndk);
 
+            my $ANDROID_NDK = $ndk;
             my $ndkver = undef;
 
+            print "nkdver: $ndkver \n";
+
             if (open my $fh, "<$ndk/source.properties") {
                 local $_;
                 while(<$fh>) {
@@ -40,6 +50,8 @@
                 close $fh;
             }
 
+            print "new_ndk_ver: $ndkver \n";
+
             my $sysroot;
 
             if (!($sysroot = $ENV{CROSS_SYSROOT})) {
@@ -66,30 +78,42 @@
 
             $sysroot =~ m|/android-([0-9]+)/arch-(\w+)/?$|;
             my ($api, $arch) = ($1, $2);
+            my $api = $ENV{"ANDROID_API_NUM"};
+            #my $arch = "arm";
 
             my $triarch = $triplet{$arch};
             my $cflags;
             my $cppflags;
 
             # see if there is NDK clang on $PATH
-            if (which("clang") =~ m|^$ndk/.*/prebuilt/([^/]+)/|) {
+            if ( $ENV{"USE_CLANG"} eq "yes" and  
+                (which("clang") =~ m|^$ndk/.*/prebuilt/([^/]+)/|
+                or which("clang") =~ m|.*android-toolchain.*| )
+            ) {
                 my $host=$1;
                 # harmonize with gcc default
                 my $arm = $ndkver > 16 ? "armv7a" : "armv5te";
                 (my $tridefault = $triarch) =~ s/^arm-/$arm-/;
                 (my $tritools   = $triarch) =~ s/(?:x|i6)86(_64)?-.*/x86$1/;
                 $cflags .= " -target $tridefault "
-                        .  "-gcc-toolchain \$(ANDROID_NDK)/toolchains"
-                        .  "/$tritools-4.9/prebuilt/$host";
+               #         .  "-gcc-toolchain \$(ANDROID_NDK)/toolchains"
+                #        .  "/$tritools-4.9/prebuilt/$host"
+                ;
+                print "clang/arm:".$arm."/tridefault:".$tridefault."tritools:".$tritools."\n";
                 $user{CC} = "clang" if ($user{CC} !~ m|clang|);
                 $user{CROSS_COMPILE} = undef;
             } elsif ($user{CC} eq "clang") {
                 die "no NDK clang on \$PATH";
             } else {
-                if (which("$triarch-gcc") !~ m|^$ndk/.*/prebuilt/([^/]+)/|) {
+                print "which $triarch-gcc :".which("$triarch-gcc")."\n";
+                if (which("$triarch-gcc") !~ m|^$ndk/.*/prebuilt/([^/]+)/| 
+                    and 
+                    which("$triarch-gcc") !~ m|.*android-toolchain.*| 
+                ) {
                     die "no NDK $triarch-gcc on \$PATH";
                 }
-                $cflags .= " -mandroid";
+                $cflags .= " -mandroid".
+                    " -D__ANDROID_API__=$api";
                 $user{CROSS_COMPILE} = "$triarch-";
             }
 
@@ -105,7 +129,7 @@
 
             $sysroot =~ s|^$ndk/||;
             $android_ndk = {
-                cflags   => "$cflags --sysroot=\$(ANDROID_NDK)/$sysroot",
+                cflags   => "$cflags --sysroot=$sysroot",
                 cppflags => $cppflags,
                 bn_ops   => $arch =~ m/64$/ ? "SIXTY_FOUR_BIT_LONG"
                                             : "BN_LLONG",
